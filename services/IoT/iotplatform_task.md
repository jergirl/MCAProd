---

copyright:
  years: 2016

---

{:new_window: target="blank"}
{:shortdesc: .shortdesc}
{:screen:.screen}
{:codeblock:.codeblock}


# Connecting devices
{: #iotplatform_task}
*Last updated: 6 June 2016*
{: .last-updated}

Before you can begin receiving data from your your IoT devices, you must connect them to  {{site.data.keyword.iot_full}}. Connecting a device to {{site.data.keyword.iot_short_notm}} involves registering the device with {{site.data.keyword.iot_short_notm}} and then using the registration information to configure the device to connect to {{site.data.keyword.iot_short_notm}}.
{:shortdesc}

## Before you begin
Before you start the connection process, you must ensure that your devices meet the following requirements for communicating with {{site.data.keyword.iot_short_notm}}:

- Your device must be able to communicate by sending device messages in the [MQTT format](https://docs.internetofthings.ibmcloud.com/reference/mqtt/index.html).
- The device messages must conform to the {{site.data.keyword.iot_short_notm}} [message payload](https://docs.internetofthings.ibmcloud.com/reference/mqtt/index.html#/message-payload#message-payload) requirements.

Complete the following steps to connect your device to {{site.data.keyword.iot_short_notm}}.

## Step 1: Registering your device with {{site.data.keyword.iot_short_notm}}  
{: #iotplatform_subtask1}

Registering a device involves classifying the device as a device type, giving the device a name, and providing device information. Then you provide a connection token or accept a token that is generated by {{site.data.keyword.iot_short_notm}}.

You can add devices one at a time from the {{site.data.keyword.iot_short_notm}} dashboard, or you can use the [{{site.data.keyword.iot_short_notm}} API](https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#!/Bulk_Operations/post_bulk_devices_add) to add one or more devices at a time.

To add a device from the {{site.data.keyword.iot_short_notm}} dashboard:

1. Click the {{site.data.keyword.iot_short_notm}} service tile in your {{site.data.keyword.Bluemix}} dashboard to open the service dashboard or go directly to the dashboard by using the following URL:
`https://org_id.internetofthings.ibmcloud.com/dashboard/#/overview`  
Where *org_id* is the ID of your {{site.data.keyword.Bluemix}} organization.

2. On the service page, click **Launch Dashboard** to start administering your {{site.data.keyword.iot_short_notm}} organization.

3. In the Overview dashboard, from the menu pane, select **Devices** and then click **Add Device**.
5. Select or create a device type for the device that you are adding.  
Each device that is connected to the {{site.data.keyword.iot_short_notm}} must be associated with a device type. Device types are groups of devices that share common characteristics.  
When you add your first device to your {{site.data.keyword.iot_short_notm}} organization, no device types are available in the **Device type** menu. You must first create a device type:
 1. Click **Create device type**.
 2. Enter a name such as `my_device_type` and a description for the device type.
 3. Optional: Enter device type attributes and metadata.    
 **Tip:** You can add and edit attributes and metadata later.
 4. Click **Create** to add the new device type.
10. Click **Next** to begin the process of adding your device with the selected device type.
11. Enter a device ID, such as `my_first_device`.  
The device ID is used to identify the device in the {{site.data.keyword.iot_short_notm}} dashboard and is also a required parameter for connecting your device to {{site.data.keyword.iot_short_notm}}.
12. Optional: Click **Additional fields** to add device information, such as serial number, manufacturer, model, and so on.  
 **Tip:** You can add and edit this information later.
12. Optional: Enter device JSON metadata.  
 **Tip:** You can add and edit device metadata later.
13. Click **Next** to complete the addition of your device.
14. Verify that the summary information is correct and then click **Add** to add the connection.  
**Tip:** You have the option to accept an automatically generated authentication token or to provide an authentication token yourself. If you choose to create your own token, make sure that it is between 8 and 36 characters long, contains a mix of lower and upper case letters, numbers, and hyphen, underscore, or period. The token must not contain repeated character sequences, dictionary words, user names, or other predefined sequences.
15. In the device information page, copy and save the following device information:  
 - Organization ID, such as `tubo8x`
 - Device Type, such as `my_device_type`
 - Device ID, such as `my_first_device`
 - Authentication Method, such as `token`
 - Authentication Token, such as `PtBVriRqIg4uh)_-Kl`  
  **Tip:** You will need Organization ID, Authentication Token, Device Type, and Device ID to configure your device to connect to {{site.data.keyword.iot_short_notm}}.  

Congratulations, you registered your device. Now you can configure your device to connect to {{site.data.keyword.iot_short_notm}}

## Step 2: Connecting your devices to {{site.data.keyword.iot_short_notm}}
{: #iotplatform_subtask2}

After you register a device with {{site.data.keyword.iot_short_notm}}, you can use the registration information to connect the device and start receiving device data.

{{site.data.keyword.iot_short_notm}} supports many device types. The basic process to connect a device typically includes the following steps:
- Set up your device for MQTT messaging and use Organization ID, Authentication Token, Device Type, and Device ID to authenticate.  
- Send device messages to your {{site.data.keyword.iot_short_notm}} organization by using the MQTT protocol.

**Tip:** Many connection recipes are available for the commonly used devices. For a list of recipes, see the
[Device connection recipes](https://developer.ibm.com/recipes/?post_type=tutorials&s=IoT) that are available on IBM.com.

The following information is required when connecting your device:
- URL: *org_id*.messaging.internetofthings.ibmcloud.com  
Where *org_id* is the ID of your {{site.data.keyword.iot_short_notm}} organization.
- Port:
 - 1883
 - 8883 (encrypted)
 - 443 (websockets)
- Device identifier: d:*org_id*:*device_type*:*device_id*  
This combination of parameters uniquely identifies your device.
- Username: use-token-auth  
This value indicates that you are using token authorization.
- Password: *Authentication token*  
This value is the unique token that you defined or that was assigned to your device when you registered it.
- Event topic format: iot-2/evt/*event_id*/fmt/*format_string*  
 Where the *event_id* specifies the event name that is shown in {{site.data.keyword.iot_short_notm}}, and *format_string* is the format of the event, such as JSON.
- Message format: JSON  
 {{site.data.keyword.iot_short_notm}} supports several formats, such as JSON and text.

For more information about connecting your device, see [MQTT Connectivity for Devices](https://docs.internetofthings.ibmcloud.com/devices/mqtt.html) in the technical documentation.
The [Connectivity](https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#!/Connectivity/post_device_types_deviceType_devices_deviceId_events_eventName) section of the API documentation also contains the required information.
