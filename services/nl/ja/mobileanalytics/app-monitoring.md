---

copyright:
  years: 2015, 2016

---
# {{site.data.keyword.mobileanalytics_short}} によるアプリのモニター
{: #monitoringapps}
*最終更新日時: 2016 年 5 月 6 日*
{: .last-updated}

{{site.data.keyword.mobileanalytics_full}} には、モバイル・アプリケーションのモニタリングや分析を行う機能が備えられています。{{site.data.keyword.mobileanalytics_short}} クライアント SDK を使用して、クライアント・ログを記録したりデータをモニターしたりできます。開発者は、このデータを {{site.data.keyword.mobileanalytics_short}} サービスに送信するタイミングを制御できます。データが {{site.data.keyword.mobileanalytics_short}} に送信されると、{{site.data.keyword.mobileanalytics_short}} ダッシュボードを使用して、モバイル・アプリケーションや、デバイス、クライアント・ログに関する分析の洞察を得ることができます。
{: shortdesc}

## カスタム・グラフによるデータの視覚化
{: #custom-charts}

分析リポジトリーに収集された分析データを視覚化することができます。この視覚化は、特定のユース・ケースのデータを調べるための強力な方法です。グラフの作成は、報告するカスタム・データだけでなく、Operational Analytics によって既に収集されているデータを使って行えます。

### クライアント・ログのカスタム・グラフの作成
{: #custom-charts-client-logs}

プラットフォームのロガー API を使用して送信されるログ情報を含むクライアント・ログのカスタム・グラフを作成できます。ログ情報には、環境やアプリ名、アプリのバージョンなどの、デバイスに関するコンテキスト情報も含まれます。

この例では、クライアント・ログ・データを使用して、フローチャートを作成します。最終グラフには、特定のアプリのログ・レベルの分布が示されます。次のデータもグラフに表示できます。

* 特定のデータ
  * ログ・レベル
* メッセージ・データ
  * タイム・スタンプ
* デバイスの OS のコンテキスト・データ
  * アプリケーション名
  * アプリケーションのバージョン
  * デバイスの OS
* デバイスのコンテキスト・データ
  * デバイス ID
  * デバイス・モデル
  * デバイスの OS バージョン


1. デバイス・ログまたは分析を収集するアプリケーションがあることを確認します。
2. {{site.data.keyword.mobileanalytics_short}} コンソールの、**「ダッシュボード」**ページで、**「カスタム・グラフ (Custom Charts)」**タブをクリックします。サーバーに送信された分析メッセージに基づくグラフを作成できます。
3. **「グラフの作成 (Create Chart)」**をクリックして、新規カスタム・グラフを作成し、以下の値を入力します。
  * グラフのタイトル: アプリケーションとログ・レベル
  * イベント・タイプ: クライアント・ログ
  * グラフ・タイプ: フローチャート
5. **「グラフの定義 (Chart Definition)」**タブをクリックし、以下の値を入力します。
  * ソース : アプリケーション名
  * 宛先: ログ・レベル
  * プロパティー: アプリ名
7. **「保存」**をクリックします。

### カスタム・データのエクスポート
{: #export-custom-data}

各カスタム・グラフから JSON、XML、または CSV 形式にデータをエクスポートできます。

エクスポートされるデータの構造は、エクスポートされているグラフによって異なります。データをエクスポートするには、カスタム・グラフの右上のエクスポート・アイコンをクリックします。



### カスタム・グラフ定義のエクスポートとインポート
{: #export-import-custom}

カスタム・グラフ定義のインポートとエクスポートは、プログラムで行うことも、{{site.data.keyword.mobileanalytics_short}} ダッシュボードを使って手動で行うこともできます。

{{site.data.keyword.mobileanalytics_short}} ダッシュボードに少なくとも 1 つのカスタム・グラフがあることを確認します。
この例では、カスタム・グラフ定義を手動でエクスポートおよびインポートします。

1. {{site.data.keyword.mobileanalytics_short}} コンソールの**「ダッシュボード」**ページの**「カスタム・グラフ (Custom Charts)」**タブをクリックします。
2. カスタム・グラフ定義をエクスポートするには、**「グラフのエクスポート (Export Charts)」**をクリックします。このアクションにより、`customChartsDefinition.json` ファイルを保存するためのダイアログが表示されます。
3. ファイルの保存先を選択します。
4. すべてのカスタム・グラフを削除するには、各カスタム・グラフの横にある**「グラフの削除 (Delete Chart)」**アイコンをクリックします。
5. カスタム・グラフ定義をインポートするには、**「グラフのインポート (Import Charts)」**をクリックします。このアクションにより、ファイルを選択するためのダイアログが表示されます。
6. 開く事前にエクスポートしていた `customChartsDefinition.json` ファイルを選択します。

選択する HTTP クライアント (例えば、CURL または postman) を使用してカスタム・グラフ定義をプログラムでエクスポートおよびインポートすることもできます。
* エクスポートの GET エンドポイントは `http://mobile-analytics-dashboard.ng.bluemix.net/analytics-service/rest/data/customCharts/` です。
* インポートの POST エンドポイントは `http://mobile-analytics-dashboard.ng.bluemix.net/analytics-service/rest/data/customCharts/import` です。

**注**: 既存のカスタム・グラフ定義をインポートすると、定義が重複してしまうことになります。定義が重複すると、{{site.data.keyword.mobileanalytics_short}} ダッシュボードに表示されるカスタム・グラフも重複します。

## アラートの設定
{: #alerts}

{{site.data.keyword.mobileanalytics_short}} コンソールでのアラート定義のしきい値の設定により、アクティビティーのモニターを改善できます。

しきい値を構成して、しきい値を超過するとアラートをトリガーして {{site.data.keyword.mobileanalytics_short}} コンソール・モニターに通知するようにできます。トリガーされたアラートをコンソールで視覚化するか、アラートをカスタム Webhook で処理できます。この機能により、クライアント・ログ・エラー、サーバー・ログ・エラー、ネットワーク待ち時間の長期化、認証の失敗を検出する事前対応手段が提供されます。リアクティブのしきい値やアラートにより、データをふるいにかけたり、しきい値を細分して設定したりする必要がなくなります。

### クライアント・ログのアラート定義の作成
{: #alert-def-client-logs}

クライアント・ログに基づくアラート定義を作成できます。

この例では、クライアント・ログ・データを使用して、アラート定義を作成します。アラートは、直近の 5 分以内に受信したすべてのクライアント・ログをモニターし、アラート定義が無効になるか削除されるまで、5 分おきに継続的にチェックします。アラートは、同じアプリ名とバージョンのクライアント・エラー・ログを 3 つ以上送信した各デバイスでトリガーされます。

1. {{site.data.keyword.mobileanalytics_short}} コンソールでベル・アイコンをクリックし、**「アラート・ログ」**ページに移動します。
2. **「アラート管理 (Alert Management)」**ページに移動し、**「アラートの作成 (Create Alert)」**をクリックします。
3. 以下の値を入力します。
	* アラート名: クライアント・ログのアラート
	* メッセージ: エラー・メッセージのアラート
	* 照会の頻度: 5 分
	* イベント・タイプ: クライアント・ログ
		* プロパティー: ログ・レベル
			* 値: エラー
			* しきい値
				* しきい値のタイプ: アプリケーション・インスタンスの合計

					**注**:「アプリケーションの平均 (Average for Application)」オプションを選択する場合、クライアント・ログは、デバイス数によって平均化されます。例えば、デバイスが 2 つあり、一方のデバイスが 6 つのクライアント・ログを送信し、もう一方のデバイスが 3 つのクライアント・ログを送信する場合、クライアント・ログの平均は 4.5 になります。
				* 演算子: 3 以上
<!-- insert alert definition tab image? -->

4. **「次へ」**または**「分布方法 (Distribution Method)」**タブをクリックし、次の値を入力します。
	* 方法: 分析コンソールのみ

		注: カスタマイズされた URL に JSON ペイロードとともに POST メッセージを追加で送信する場合、「分析コンソールとネットワーク・ポスト (Analytics Console and Network Post)」オプションを選択します。このオプションを選択すると、以下のフィールドが使用可能になります。
		* ネットワーク・ポスト URL (Network Post URL)
        * ヘッダー (Headers)
        * 認証タイプ (Authentication Type)
5. **「保存」**をクリックします。

クライアント・ログの数がしきい値の 3 個以上のエラー・ログになった場合に 5 分の各間隔の最後にアラートをトリガーするアラート定義が作成されました。

### アプリ異常終了のアラート定義の作成
{: #alert-def-app-crash}

アプリ異常終了に基づいてアラート定義を作成できます。

この例では、アプリ異常終了データを使用して、アラート定義を作成します。アラートは、直近の 2 分以内のすべてのアプリ異常終了をモニターし、アラート定義が無効になるか削除されるまで、2 分おきに継続的にチェックします。アラートは、各アプリの異常終了回数が 5 回以上になるとトリガーされます。アプリ異常終了について詳しくは、[アプリ異常終了](app_crash/c_op_analytics_crashes.html)を参照してください。

1. {{site.data.keyword.mobileanalytics_short}} コンソールで、**「アラート」**アイコンをクリックします。このアクションにより、「アラート・ログ」ページが開きます。
2. **「アラート管理 (Alert Management)」**タブをクリックし、**「アラートの作成 (Create Alert)」**をクリックします。
3. 以下の値を入力します。
	* アラート名: アプリ異常終了のアラート
	* メッセージ: アプリ異常終了のアラート
	* 照会の頻度: アプリケーションの異常終了
		* アプリケーション名: 任意のアプリケーション
		* アプリケーションのバージョン: 任意のバージョン
    * しきい値
      * しきい値のタイプ: 異常終了回数
      * 演算子: 5 以上
4. **「分布方法 (Distribution Method)」**タブをクリックし、次の値を入力します。
  * 方法: 分析コンソールのみ

    **注**: カスタマイズされた URL に JSON ペイロードとともに POST メッセージを追加で送信する場合、**「分析コンソールとネットワーク・ポスト (Analytics Console and Network Post)」**オプションを選択します。このオプションを選択すると、以下のフィールドが使用可能になります。
      * ネットワーク・ポスト URL (Network Post URL)(必須)
      * ヘッダー (Headers)(オプション)
      * 認証タイプ (Authentication Type)(必須)
5. **「保存」**をクリックします。

### アラート定義の管理
{: #managing-alert-definitions}

この例では、「アラート管理 (Alert Management)」ページからアラート定義を管理します。

1. {{site.data.keyword.mobileanalytics_short}} コンソールで、**「アラート」**アイコンをクリックします。このアクションにより、「アラート・ログ」ページが開きます。
2. **「アラート管理 (Alerts Management)」**タブをクリックします。
3. オプション:**「有効」**列の下のチェック・ボックスを切り替えて、特定のアラート定義を有効または無効にします。
4. オプション: アラート定義のコピーを作成し、いくつかの値を変更する場合は、**「複写」**アイコンをクリックします。
5. オプション: アラート定義を編集する場合は、**「鉛筆 (Pencil)」**アイコンをクリックします。
6. オプション: アラート定義を削除する場合は、**「ごみ箱」**アイコンをクリックします。

### アラート詳細の表示
{: #viewing-alert-details}

この例では、トリガーされたアラートの詳細を「アラート・ログ」ページから表示します。

1. {{site.data.keyword.mobileanalytics_short}} コンソールで、**「アラート」**アイコンをクリックします。このアクションにより、「アラート・ログ」ページが開きます。
2. 任意のアラートの**「+」**アイコンをクリックします。このアクションにより、**「アラート定義 (Alert Definition)」**セクションと**「アラート・インスタンス (Alert Instances)」**セクションが表示されます。

    **注**: 対応するアラート定義が削除も変更もされていない場合、**「アラートの編集 (Edit Alert)」**をクリックしてアラート定義を編集できます。削除または変更されている場合、**「アラートの編集 (Edit Alert)」**ボタンを使用できず、以下のメッセージが表示されます。

    `このアラート定義は変更または削除されました。(This alert definition has since been modified or deleted.)`

3. オプション: アラートを削除するには、アラートを選択し**「ごみ箱」**アイコンをクリックします。

## アプリの異常終了
{: #monitor-app-crash}

{{site.data.keyword.mobileanalytics_short}} コンソールでアプリの異常終了に関する情報を表示し、アプリのモニターやトラブルシューティングを向上させることができます。

### アプリ異常終了のモニター
{: #app-crash}

{{site.data.keyword.mobileanalytics_short}} コンソールの**「ダッシュボード」**セクションにアプリの異常終了に関する情報が即座に表示されます。

**「ダッシュボード」**セクションの**「概要」**ページの**「異常終了」**棒グラフに、時間別の異常終了ヒストグラムが表示されます。

データの表示方法は 2 とおりあります。

1. 異常終了率の表示: 時間別の異常終了率
2. 合計異常終了回数の表示: 時間別の合計異常終了回数


### アプリ異常終了のトラブルシューティング
{: #app-crash-troubleshooting}

{{site.data.keyword.mobileanalytics_short}} コンソールの**「アプリケーション」**セクションの**「異常終了」**ページを表示して、アプリの管理を向上させることができます。

**「異常終了の概要 (Crash Overview)」**表に、次のデータ列が表示されます。

* アプリ: アプリ名
* 異常終了: そのアプリの異常終了の総数
* 合計使用回数: ユーザーがアプリをオープンおよびクローズした回数の合計
* 異常終了率: 使用ごとの異常終了のパーセンテージ

**「異常終了の要約 (Crash Summary)」**表はソート可能であり、次のデータ列が含まれています。

* 異常終了
* デバイス
* 最終異常終了日時
* アプリ
* OS
* メッセージ

項目の横の + アイコンをクリックして、**「異常終了の詳細 (Crash Details)」**表を表示できます。この表には、次の列が含まれています。

* 異常終了時刻
* アプリのバージョン
* OS バージョン
* デバイス・モデル
* デバイス ID
* ダウンロード: 異常終了につながるログをダウンロードするためのリンク

**「異常終了の詳細 (Crash Details)」**表の項目を展開して、スタック・トレースなどの詳細を取得できます。

**注**: 重大レベルのクライアント・ログを照会することにより、**「異常終了の要約 (Crash Summary)」**表にデータが取り込まれます。アプリが重大なクライアント・ログを収集しない場合、データを使用できません。


