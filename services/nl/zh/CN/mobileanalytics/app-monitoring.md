---

copyright:
  years: 2015, 2016

---
# 使用 {{site.data.keyword.mobileanalytics_short}} 监视应用程序
{: #monitoringapps}
*上次更新时间：2016 年 5 月 6 日*
{: .last-updated}

{{site.data.keyword.mobileanalytics_full}} 可监视和分析移动应用程序。您可以使用 {{site.data.keyword.mobileanalytics_short}} 客户端 SDK 来记录客户机日志并监视数据。开发者可以控制何时将这些数据发送到 {{site.data.keyword.mobileanalytics_short}} 服务。数据传递到 {{site.data.keyword.mobileanalytics_short}} 后，可以使用 {{site.data.keyword.mobileanalytics_short}} 仪表板，来获取有关移动应用程序、设备和客户机日志的分析洞察。
{: shortdesc}

## 使用定制图表直观地显示数据
{: #custom-charts}

您可以直观地显示分析存储库中收集的分析数据。这一可视化功能是一种检查特定用例数据的有用方式。除了报告的定制数据之外，您还可以使用由“运行分析”收集的数据，来创建图表。

### 为客户机日志创建定制图表
{: #custom-charts-client-logs}

您可以为包含日志信息的客户机日志，创建定制图表，该日志信息会随平台的记录器 API 一起发送。该日志信息还包含设备的上下文信息，其中包括环境、应用程序名称和应用程序版本。

在本示例中，将使用客户机日志数据来创建一个流程图。最终图形显示特定应用程序中日志级别的分布。此外，还将在图表中显示以下数据：

* 特定数据
  * 日志级别
* 消息数据
  * 时间戳记
* 设备操作系统上下文数据
  * 应用程序名称
  * 应用程序版本
  * 设备操作系统
* 设备上下文数据
  * 设备标识
  * 设备模型
  * 设备操作系统版本


1. 请确定您具有收集设备日志或收集分析的应用程序。
2. 在 {{site.data.keyword.mobileanalytics_short}} 控制台中，单击**仪表板**页面上的**定制图表**选项卡。您可以基于发送到伺服器的分析消息，创建图表。
3. 单击**创建图表**，以创建新的定制图表，并提供下列值：
  * 图表标题：应用程序和日志级别
  * 事件类型：客户机日志
  * 图表类型：流程图
5. 单击**图表定义**选项卡并提供以下值：
  * 源：应用程序名称
  * 目标：日志级别
  * 属性：应用程序名称
7. 单击**保存**。

### 导出定制数据
{: #export-custom-data}

您可以将数据从每一个定制图表导出为 JSON、XML 或 CSV 格式。

所导出数据的结构取决于正在导出的图表。要导出数据，请单击定制图表右上方的导出图标。



### 导出和导入定制图表定义
{: #export-import-custom}

您可以在 {{site.data.keyword.mobileanalytics_short}} 仪表板中，以编程方式或手动导入和导出定制图表定义。

请确保在 {{site.data.keyword.mobileanalytics_short}} 仪表板中，至少有一个定制图表。
在此示例中，您将手动导出和导入定制图表定义。

1. 在 {{site.data.keyword.mobileanalytics_short}} 控制台中，单击**仪表板**页面中的**定制图表**选项卡。
2. 要导出定制图表定义，请单击**导出图表**。此操作会显示一个对话框，供您保存 `customChartsDefinition.json` 文件。
3. 选择用于保存该文件的位置。
4. 单击每个定制图表旁的**删除图表**图标，以删除全部定制图表。
5. 要导入定制图表定义，请单击**导入图表**。此操作会显示一个对话框，供您选择文件。
6. 选择您先前导出的 `customChartsDefinition.json` 文件以将其打开。

您还可以使用所选择的 HTTP 客户端（例如 CURL 或 postman），以编程方式导出和导入定制图表定义：
* 导出的 GET 端点为 `http://mobile-analytics-dashboard.ng.bluemix.net/analytics-service/rest/data/customCharts/`。
* 导入的 POST 端点为 `http://mobile-analytics-dashboard.ng.bluemix.net/analytics-service/rest/data/customCharts/import`。

**注**：如果您导入已经存在的定制图表定义，那么您会以重复的定义结束，也就是说 {{site.data.keyword.mobileanalytics_short}} 仪表板会显示重复的定制图表。

## 设置警报
{: #alerts}

可以在 {{site.data.keyword.mobileanalytics_short}} 控制台中的警报定义内设置阈值，以更好地监控活动。

您可以配置阈值，当超过阈值时，触发器便会触发警报以向 {{site.data.keyword.mobileanalytics_short}} 控制台监控器通知此情况。已触发的警报可以显示在控制台中，或者可以由定制 webhook 进行处理。此功能能够主动检测客户机日志错误、服务器日志错误、网络等待时间延长以及认证失败。响应式阈值和警报使您不必筛查数据，或者设置大范围的阈值。

### 为客户机日志创建警报定义
{: #alert-def-client-logs}

您可以基于客户机日志创建警报定义。

在此示例中，您将使用客户机日志数据来创建警报定义。该警报会监控在过去 5 分钟内收到的所有客户机日志，并且每 5 分钟继续检查一次，直到该警报定义被禁用或删除。如果设备发送了 3 个或更多个具有相同应用程序名称和版本的客户机错误日志，那么将会触发警报。

1. 在 {{site.data.keyword.mobileanalytics_short}} 控制台中，单击铃图标以转至**警报日志**页面。
2. 转至**警报管理**页面，并单击**创建警报**。
3. 提供以下值：
	* 警报名称：客户机日志的警报
	* 消息：错误消息警报
	* 查询频率：5 分钟
	* 事件类型：客户机日志
		* 属性：日志级别
			* 值：错误
			* 阈值
				* 阈值类型：应用程序实例的总计

					**注**：如果您选择“应用程序的平均值”选项，那么客户机日志会按设备数求平均值。例如，如果您有两个设备，其中一个设备发送六个客户机日志，而另一个设备发送三个客户机日志，那么平均值为 4.5 个客户机日志。
				* 运算符：大于或等于 3
	<!-- insert alert definition tab image? -->

4. 单击**下一步**或**分发方法**选项卡，并提供以下值：
	* 方法：仅限分析控制台

		注：如果您想要额外发送具有 JSON 有效内容的 POST 消息到您定制的 URL，请选择“分析控制台和网络 Post”选项。如果选择此选项，那么以下字段可用：
		* 网络 Post URL
        * 标头
        * 认证类型
5. 单击**保存**。

您已创建警报定义，在客户机日志达到阈值 3 或更多错误日志时，每 5 分钟触发一次警报。

### 为应用程序崩溃创建警报定义
{: #alert-def-app-crash}

您可以基于应用程序崩溃创建警报定义。

在此示例中，您将使用应用程序崩溃数据来创建警报定义。该警报会监控在过去 2 分钟内出现的所有应用程序崩溃，并且每 2 分钟继续检查一次，直到该警报定义被禁用或删除。对于崩溃 5 次或 5 次以上的每一个应用程序，都会触发警报。有关应用程序崩溃的更多信息，请参阅[应用程序崩溃](app_crash/c_op_analytics_crashes.html)。

1. 在 {{site.data.keyword.mobileanalytics_short}} 控制台中，单击**警报**图标。此操作会打开“警报日志”页面。
2. 单击**警报管理**选项卡并单击**创建警报**。
3. 提供以下值：
	* 警报名称：应用程序崩溃的警报
	* 消息：应用程序崩溃警报
	* 查询频率：应用程序崩溃
		* 应用程序名称：任何应用程序
		* 应用程序版本：任何版本
    * 阈值
      * 阈值类型：崩溃计数
      * 运算符：大于或等于 5
4. 单击**分发方法**选项卡并提供以下值：
  * 方法：仅限分析控制台

    **注**：如果您想要额外发送具有 JSON 有效内容的 POST 消息到您定制的 URL，请选择**分析控制台和网络 Post** 选项。如果选择此选项，那么以下字段可用：
      * 网络 Post URL（必需）
      * 标头（可选）
      * 认证类型（必需）
5. 单击**保存**。

### 管理警报定义
{: #managing-alert-definitions}

在此示例中，您将通过“警报管理”页面来管理警报定义。

1. 在 {{site.data.keyword.mobileanalytics_short}} 控制台中，单击**警报**图标。此操作会打开“警报日志”页面。
2. 单击**警报管理**选项卡。
3. 可选：切换**启用**列下的复选框，以启用或禁用特定警报定义。
4. 可选：如果您想要创建警报定义的副本并更改一些值，请单击**复制**图标。
5. 可选：如果您想要编辑警报定义，请单击**画笔**图标。
6. 可选：如果您想要删除警报定义，请单击**废纸篓**图标。

### 查看警报详细信息
{: #viewing-alert-details}

在此示例中，您将在“警报日志”页面中查看已触发警报的详细信息。

1. 在 {{site.data.keyword.mobileanalytics_short}} 控制台中，单击**警报**图标。此操作会打开“警报日志”页面。
2. 单击任意警报的 **+** 图标。该操作会显示**警报定义**和**警报实例**部分。

    **注**：如果未删除或修改相应的警报定义，那么您可以通过单击**编辑警报**，来编辑警报定义。否则，无法使用**编辑警报**按钮，且会显示下列消息：

    `此警报定义已修改或删除。`

3. 可选：选择警报并单击**废纸篓**图标，以删除警报。

## 应用程序崩溃
{: #monitor-app-crash}

您可以在 {{site.data.keyword.mobileanalytics_short}} 控制台中查看应用程序崩溃的相关信息，以更好地监视应用程序，并进行故障诊断。

### 应用程序崩溃监视
{: #app-crash}

您可以在 {{site.data.keyword.mobileanalytics_short}} 控制台的**仪表板**部分中，快速查看应用程序崩溃的相关信息。

在**仪表板**部分的**概述**页面中，**崩溃**条形图显示一段时间的崩溃直方图。

您可以使用两种方式来显示数据：

1. 显示崩溃率：随时间变化的崩溃率
2. 显示总崩溃次数：随时间变化的总崩溃次数


### 应用程序崩溃故障诊断
{: #app-crash-troubleshooting}

您可以在 {{site.data.keyword.mobileanalytics_short}} 控制台的**应用程序**部分中，查看**崩溃**页面，以更好地管理应用程序。

**崩溃概述**表显示以下数据列：

* 应用程序：应用程序名称
* 崩溃：应用程序的总崩溃次数
* 使用总数：用户打开和关闭该应用程序的总次数
* 崩溃率：崩溃次数占使用次数的百分比

**崩溃摘要**表可进行排序，且包含下列数据列：

* 崩溃
* 设备
* 上次崩溃
* 应用程序
* 操作系统
* 消息

您可以单击任意条目旁的 + 图标，以显示包含以下各列的**崩溃详细信息**表：

* 崩溃时间
* 应用程序版本
* 操作系统版本
* 设备模型
* 设备标识
* 下载：用于下载一直到发生此崩溃时的日志的链接

您可以展开**崩溃详细信息**表中的任何条目，以获取包含堆栈跟踪在内的更多详细信息。

**注**：通过查询致命级别客户机日志，可以填充**崩溃摘要**表的数据。如果您的应用程序未收集致命客户机日志，那么没有可用的数据。


